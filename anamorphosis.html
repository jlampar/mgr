<!DOCTYPE html>
<html>
<head>
	<title>Transformacja anamorficzna</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" type="text/css" href="style/anamorphosis.css">
	<script src="geo_data.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="jQuery/JQ.js"></script>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

	<!-- icon created from country borders in ArcMAP, converted to SVG with Inkscape and CorelDRAW X4 -->
	<symbol id="polska" viewBox="0 0 70 65">
		<path = d="m 48.5642,56.2102 -2.9353,1.4068 -3.7801,-0.9453 -1.4453,2.1544 -1.5565,-0.11 -2.3793,-3.9789"/>
		<path = d="m 36.4677,54.7372 -3.0465,2.0883 -2.5127,-5.0119 -3.3352,-1.4068"/>
		<path = d="m 27.5733,50.4068 -1.0232,0.8792 -1.6899,-1.8026 0.8005,-1.5168 -2.2682,0.5054 -2.6684,-1.8464"/>
		<path = d="m 61.5501,47.8347 -5.2477,7.1663 1.8233,4.8804 -9.5615,-3.6712"/>
		<path = d="m 47.118801,47.504799 1.4454,8.705402"/>
		<path = d="m 47.1188,47.5048 -4.8474,1.671 -0.9117,-2.6164 -1.979,-0.3076"/>
		<path = d="m 20.7241,46.6256 2.0905,-1.5387 1.9345,-5.0561 1.5342,-0.3519"/>
		<path = d="m 20.7241,46.6256 0.6671,2.1102 -2.1121,1.1872 -2.9353,-3.2755 1.5788,-1.341 -0.6006,-0.7911 -1.9568,0.5273 -1.2227,-1.5388 -2.6685,-0.3515 -1.112,-2.3525 -2.20125,1.2972 1.1785,-4.6384"/>
		<path = d="m 39.3807,46.2518 -2.6462,0.8576 -2.6685,4.4404 2.4017,3.1874"/>
		<path = d="M 39.380699,46.251801 38.091,42.822498"/>
		<path = d="m 50.987701,43.130501 -3.8689,4.374298"/>
		<path = d="m 50.9877,43.1305 4.0916,1.9122 -0.6449,1.8029 1.3566,0.7691 4.5141,-1.2091 1.245,1.4291"/>
		<path = d="m 38.091,42.8225 0.756,-1.7364 0.9782,0.7034 -0.2669,-2.0225 2.6239,-1.4949"/>
		<path = d="m 31.5756,41.0418 -1.5565,7.6502 -2.4458,1.7148"/>
		<path = d="m 31.5756,41.0418 1.5565,-0.3515 4.9589,2.1322"/>
		<path = d="m 50.521,40.580299 0.466701,2.550202"/>
		<path = d="M 28.506901,39.920799 31.5756,41.041801"/>
		<path = d="m 26.2833,39.678902 2.223601,0.241897"/>
		<path = d="m 42.1822,38.2721 1.5568,1.7587 6.782,0.5495"/>
		<path = d="m 42.1822,38.2721 0.7117,-5.2319 -1.9568,-0.3957 0.1112,-1.5829 -1.9791,-1.8683 -3.8247,-0.8354"/>
		<path = d="m 9.33925,37.4587 2.62385,-1.4507 1.1785,0.8792 2.424,-3.2974 1.6676,1.3849 0.9116,-1.1211"/>
		<path = d="M 9.33925,37.4587 7.29368,32.9964 8.44989,30.732 7.60475,25.3682"/>
		<path = d="m 18.1448,33.8536 3.2022,2.396 3.2241,-0.6154 1.7122,4.0447"/>
		<path = d="m 18.1448,33.8536 -3.3133,-3.2097 1.1343,-8.815"/>
		<path = d="m 33.8215,28.9294 -2.1348,4.8362 -1.6453,0.2857 -0.4449,3.4293 -1.6233,0.7476 0.5337,1.6926"/>
		<path = d="m 33.8215,28.9294 -9.2281,-3.4074 0.3556,-2.3521 -1.245,-0.6595 0.8448,-2.5721 -1.0671,-1.033 0.8448,-1.0991"/>
		<path = d="m 58.1703,28.6875 2.913,1.8245 0.4445,7.4305 3.291,3.8027 -1.0893,0.7915 0.689,3.2755 -2.8684,2.0225"/>
		<path = d="M 58.1703,28.6875 57.881199,28.6656"/>
		<path = d="m 57.8812,28.6656 -1.2232,2.1983 -6.0259,1.1653 0.2445,2.5278 -1.6899,0.8792 1.6011,1.2972 -0.2668,3.8469"/>
		<path = d="m 35.244499,28.357901 -1.423,0.571498"/>
		<path = d="M 7.60475,25.3682 5.18121,23.1699 7.3379,19.2568 6.24822,12.992 17.1886,10.178 20.7022,7.47397"/>
		<path = d="m 15.9658,21.8289 -6.18167,1.143 -2.17938,2.3963"/>
		<path = d="m 37.9576,21.1255 -0.4449,1.8464 -1.3788,0.11 0.4895,2.2863 -1.3789,2.9897"/>
		<path = d="m 37.9576,21.1255 3.424,-0.0219 7.138,-3.3636"/>
		<path = d="M 24.3265,17.8062 21.524599,16.179399"/>
		<path = d="m 24.3265,17.8062 3.9358,-2.6821 6.026,1.8687"/>
		<path = d="m 48.5196,17.74 0.6006,3.2317 2.1125,2.6597 2.4458,0.4838 0.8228,3.627 3.3799,0.9234"/>
		<path = d="m 34.2883,16.9928 3.6693,4.1327"/>
		<path = d="m 21.5246,16.1794 -2.6681,1.7587 1.0674,2.374 -3.9581,1.5168"/>
		<path = d="M 21.524599,16.179399 20.7022,7.4739699"/>
		<path = d="m 54.8347,9.05691 -1.6899,1.62679 1.8456,2.594 -0.4002,1.5387 -6.0706,2.9236"/>
		<path = d="m 54.8347,9.05691 4.025,1.78059 3.0907,9.2769 0.4225,4.2204 -4.2026,4.3527"/>
		<path = d="M 37.179,8.74924 35,10.3979 l -0.1999,2.0226 2.0455,1.3406 -2.5573,3.2317"/>
		<path = d="M 37.179,8.74924 47.2969,9.82646 54.8347,9.05691"/>
		<path = d="m 20.7022,7.47397 9.0055,-2.3521 2.8684,2.02251 -2.2459,-1.56063 1.6903,3.91274 5.1585,-0.74725"/>
	</symbol>

	<!-- icon created from country borders in ArcMAP, converted to SVG with Inkscape and CorelDRAW X4 -->
	<symbol id="net" viewBox="0 0 70 65">
		<path d="m 25.060499,59.881401 h 19.879"/>
		<path d="m 25.060499,59.881401 v -18.2458"/>
		<path d="M 25.0605,59.8814 H 5.18121 V 41.6356"/>
		<path d="M 44.9395,59.8814 H 64.8188 V 41.6356"/>
		<path d="m 44.939499,59.881401 v -18.2458"/>
		<path d="M 5.18121,41.635601 H 25.060499"/>
		<path d="M 5.18121,41.635601 V 23.367599"/>
		<path d="m 25.060499,41.635601 h 19.879"/>
		<path d="M 25.060499,41.635601 V 23.367599"/>
		<path d="M 44.939499,41.635601 H 64.818802"/>
		<path d="M 44.939499,41.635601 V 23.367599"/>
		<path d="M 64.818802,41.635601 V 23.367599"/>
		<path d="M 5.18121,23.367599 H 25.060499"/>
		<path d="M 5.18121,23.3676 V 5.12187 H 25.0605"/>
		<path d="m 25.060499,23.367599 h 19.879"/>
		<path d="M 25.060499,23.367599 V 5.12187"/>
		<path d="M 44.939499,23.367599 H 64.818802"/>
		<path d="M 44.939499,23.367599 V 5.12187"/>
		<path d="M 64.8188,23.3676 V 5.12187 H 44.9395"/>
		<path d="m 25.060499,5.12187 h 19.879"/>
	</symbol>

	<!-- icon created from country borders in ArcMAP, converted to SVG with Inkscape and CorelDRAW X4 -->
	<symbol id="gaussNet" viewBox="0 0 70 65">
		<path d="M15.1207 57.1555c-2.1567,0 -4.31377,-0.417657 -5.18083,-1.27527 -1.7345,-1.71447 -1.7345,-8.55119 0,-10.2437 1.71183,-1.71485 8.62754,-1.71485 10.362,0 1.7345,1.69255 1.7345,8.52927 0,10.2437 -0.867441,0.857613 -3.02414,1.27527 -5.18121,1.27527z"/>
		<path d="M35 57.1555c-2.15707,0 -4.31377,-0.417657 -5.18121,-1.27527 -1.73413,-1.71447 -1.73413,-8.55119 0,-10.2437 1.7345,-1.71485 8.62792,-1.71485 10.3624,0 1.73413,1.69255 1.73413,8.52927 0,10.2437 -0.867441,0.857613 -3.02414,1.27527 -5.18121,1.27527z"/>
		<path d="M54.8793 57.1555c-2.15707,0 -4.31377,-0.417657 -5.18121,-1.27527 -1.7345,-1.71447 -1.7345,-8.55119 0,-10.2437 1.7345,-1.71485 8.65022,-1.71485 10.362,0 1.7345,1.69255 1.7345,8.52927 0,10.2437 -0.867063,0.857613 -3.02414,1.27527 -5.18083,1.27527z"/>
		<path d="M15.1207 38.9097c-2.1567,0 -4.31377,-0.417657 -5.18083,-1.27527 -1.7345,-1.71447 -1.7345,-8.55119 0,-10.2657 1.71183,-1.69293 8.62754,-1.69293 10.362,0 1.7345,1.71447 1.7345,8.55119 0,10.2657 -0.867441,0.857613 -3.02414,1.27527 -5.18121,1.27527z"/>
		<path d="M35 38.9097c-2.15707,0 -4.31377,-0.417657 -5.18121,-1.27527 -1.73413,-1.71447 -1.73413,-8.55119 0,-10.2657 1.7345,-1.69293 8.62792,-1.69293 10.3624,0 1.73413,1.71447 1.73413,8.55119 0,10.2657 -0.867441,0.857613 -3.02414,1.27527 -5.18121,1.27527z"/>
		<path d="M54.8793 38.9097c-2.15707,0 -4.31377,-0.417657 -5.18121,-1.27527 -1.7345,-1.71447 -1.7345,-8.55119 0,-10.2657 1.7345,-1.69293 8.65022,-1.69293 10.362,0 1.7345,1.71447 1.7345,8.55119 0,10.2657 -0.867063,0.857613 -3.02414,1.27527 -5.18083,1.27527z"/>
		<path d="M15.1207 20.664c-2.1567,0 -4.31377,-0.439957 -5.18083,-1.29719 -1.7345,-1.69255 -1.7345,-8.52927 0,-10.2437 1.71183,-1.71485 8.62754,-1.71485 10.362,0 1.7345,1.71447 1.7345,8.55119 0,10.2437 -0.867441,0.857235 -3.02414,1.29719 -5.18121,1.29719z"/>
		<path d="M35 20.664c-2.15707,0 -4.31377,-0.439957 -5.18121,-1.29719 -1.73413,-1.69255 -1.73413,-8.52927 0,-10.2437 1.7345,-1.71485 8.62792,-1.71485 10.3624,0 1.73413,1.71447 1.73413,8.55119 0,10.2437 -0.867441,0.857235 -3.02414,1.29719 -5.18121,1.29719z"/>
		<path d="M54.8793 20.664c-2.15707,0 -4.31377,-0.439957 -5.18121,-1.29719 -1.7345,-1.69255 -1.7345,-8.52927 0,-10.2437 1.7345,-1.71485 8.65022,-1.71485 10.362,0 1.7345,1.71447 1.7345,8.55119 0,10.2437 -0.867063,0.857235 -3.02414,1.29719 -5.18083,1.29719z"/>
	</symbol>

	<!-- icon created in CorelDRAW X4 -->
	<symbol id="nArrow" viewBox="0 0 72 72">
		<path d="M7.40084 10.5067c-0.256547,0.0939789 -0.513853,0.1872 -0.771537,0.277389 -3.20627,1.12585 -6.49364,1.73027 -9.73326,2.02699 8.72716,2.48173 17.9344,3.52004 26.6813,7.1424 9.21297,3.81486 17.4471,10.2793 25.8529,16.0427 -8.40581,5.77099 -16.6396,12.2415 -25.8529,16.064 -8.74686,3.6288 -17.9541,4.64703 -26.6813,7.12876 3.23962,0.289516 6.52585,0.897726 9.73326,2.02699 3.27448,1.15314 6.49364,2.62686 9.74046,4.06724 0,0 0,0 0,0 8.69874,-1.95764 17.5547,-6.23634 26.3675,-12.0164 8.69874,-5.70581 17.1474,-11.5136 25.5179,-17.2705 -8.37057,-5.74939 -16.8192,-11.5503 -25.5179,-17.2561 -8.8128,-5.78008 -17.6688,-10.0588 -26.3675,-12.0236 0,0 0,0 0,0 -2.97701,1.31457 -5.93015,2.67158 -8.92497,3.77432 -0.0144,0.00530526 -0.0291789,0.0106105 -0.0439579,0.0159158z"/>
	</symbol>

	<!-- icon created in CorelDRAW X4 -->
	<symbol id="pArrow" viewBox="0 0 72 72">
		<path d="M64.5992 61.4933c0.256547,-0.0939789 0.513853,-0.1872 0.771537,-0.277389 3.20627,-1.12585 6.49364,-1.73027 9.73326,-2.02699 -8.72716,-2.48173 -17.9344,-3.52004 -26.6813,-7.1424 -9.21297,-3.81486 -17.4471,-10.2793 -25.8529,-16.0427 8.40581,-5.77099 16.6396,-12.2415 25.8529,-16.064 8.74686,-3.6288 17.9541,-4.64703 26.6813,-7.12876 -3.23962,-0.289516 -6.52585,-0.897726 -9.73326,-2.02699 -3.27448,-1.15314 -6.49364,-2.62686 -9.74046,-4.06724 0,0 0,0 0,0 -8.69874,1.95764 -17.5547,6.23634 -26.3675,12.0164 -8.69874,5.70581 -17.1474,11.5136 -25.5179,17.2705 8.37057,5.74939 16.8192,11.5503 25.5179,17.2561 8.8128,5.78008 17.6688,10.0588 26.3675,12.0236 0,0 0,0 0,0 2.97701,-1.31457 5.93015,-2.67158 8.92497,-3.77432 0.0144,-0.00530526 0.0291789,-0.0106105 0.0439579,-0.0159158z"/>
	</symbol>
</svg>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/d3-geo.v1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/kute.js/1.6.2/kute.min.js"></script>
<script src="https://cdn.jsdelivr.net/kute.js/1.6.2/kute-svg.min.js"></script>
<div id="jumbotron">
	<div id="cont">
		<div id="header">
			<h1>
				<span class="br">Kar</span>
				<span class="br">tog</span>
				<span class="br">ram</span>
				<span id="breakline">
				<span class="br">Ana</span>
				<span class="br">mor</span>
				<span class="br">fic</span>
				<span class="br">zny</span>
			</h1>
		</div>
	</div>
</div>
<div id="story">
	<p id="paraStory">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet ullamcorper dui, vestibulum efficitur neque. Maecenas ut nibh quam. Fusce aliquam tortor a lobortis pulvinar. Sed euismod purus sed ultrices commodo. Vivamus maximus sapien id libero volutpat congue. Mauris eros augue, tempus at quam quis, suscipit posuere ipsum. Phasellus eleifend nunc a sem feugiat dignissim. Etiam viverra tristique est vitae consequat. Donec sagittis pharetra erat vel pulvinar. Suspendisse eget urna nec libero convallis finibus at at enim. Integer imperdiet malesuada arcu, ac luctus libero tincidunt at. Morbi iaculis lobortis turpis, ac auctor turpis commodo eu.</p>
	<div id="first" class="boxFrame">
		<svg class="icon"><use xlink:href="#polska" /></svg>
		<p class="boxStory">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet ullamcorper dui, vestibulum efficitur neque. Maecenas ut nibh quam. Fusce aliquam tortor a lobortis pulvinar. Sed euismod purus sed ultrices commodo. Vivamus maximus sapien id libero volutpat congue.</p>
	</div>
	<div id="second" class="boxFrame">
		<svg class="icon"><use xlink:href="#net" /></svg>
		<p class="boxStory">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet ullamcorper dui, vestibulum efficitur neque. Maecenas ut nibh quam. Fusce aliquam tortor a lobortis pulvinar. Sed euismod purus sed ultrices commodo. Vivamus maximus sapien id libero volutpat congue.</p>
	</div>
	<div id="third" class="boxFrame">
		<svg class="icon"><use xlink:href="#gaussNet" /></svg>
		<p class="boxStory">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet ullamcorper dui, vestibulum efficitur neque. Maecenas ut nibh quam. Fusce aliquam tortor a lobortis pulvinar. Sed euismod purus sed ultrices commodo. Vivamus maximus sapien id libero volutpat congue.</p>
	</div>
</div>
<div id="passtron">
	<h2>Phasellus eleifend nunc a sem feugiat dignissim. Etiam viverra tristique est vitae consequat. Donec sagittis pharetra erat vel pulvinar.</h2>
</div>
<div id="mapWrapper">
	<div id="flexContainer">
		<div id="sideDiv">
			<p id="sideStory">Integer imperdiet malesuada arcu, ac luctus libero tincidunt at. Morbi iaculis lobortis turpis, ac auctor turpis commodo eu.</p>
			<p id="sideStory">Sed euismod purus sed ultrices commodo. Vivamus maximus sapien id libero volutpat congue. Mauris eros augue, tempus at quam quis, 	suscipit posuere ipsum. Phasellus eleifend nunc a sem feugiat dignissim. Etiam viverra tristique est vitae consequat. Donec sagittis pharetra erat vel 	pulvinar. Suspendisse eget urna nec libero convallis finibus at at enim. Integer imperdiet malesuada arcu, ac luctus libero tincidunt at. Morbi iaculis lobortis turpis, ac auctor turpis commodo eu.</p>
		</div>
		<div id="mapDiv">
			<div id="basket"></div>
			<div id="buttonWrapper">
				<div id="PBt"><svg class="Pbutton"><use xlink:href="#pArrow" /></svg></div>
				<div id="display"></div>
				<div id="NBt"><svg class="Nbutton"><use xlink:href="#nArrow" /></svg></div>
			</div>
		</div>
	</div>
</div>
<footer>
	<p id="footerText">Created by Jakub Lamparski</p>
	<address><a href="mailto:lamparskijakub@gmail.com">e-mail</a></address>
</footer>


<script>
	
	/* borders transformation with Gastner-Newman diffusion-based cartogram method; Cartogram computed in ArcMAP, converted from SHP to JSON*/

	var h = document.getElementById("basket").offsetHeight;
	var w = h;

	var svg = d3.select(document.getElementById("basket"))
		.append("svg")
		.attr("preserveAspectRatio", "xMinYMin meet")
		.attr("viewBox","0 0 " + w + " " + h)
		.attr("id", "SVG");

	var basket = d3.select('#basket');

	var g = svg.append("g")
		.attr("id", "container");

	var mercator = d3.geoMercator()
		.scale(1)
		.translate([0,0]);

	var geoPathInit = d3.geoPath().projection(mercator);

	var b = geoPathInit.bounds(init);
	var s = .95 / Math.max((b[1][0] - b[0][0]) / w, (b[1][1] - b[0][1]) / h);
	var t = [(w - s * (b[1][0] + b[0][0])) / 2, (h - s * (b[1][1] + b[0][1])) / 2];

	mercator.scale(s).translate(t);

	var geoPathInitUpdated = d3.geoPath().projection(mercator);

	g.append("g")
		.attr("id", "init")
		.attr("class", "wojewodztwo")
		.selectAll("path")
		.data(init.features)
		.enter()
		.append("path")
		.attr("id", function(d) {return d.properties.wojewodztw + '_init';})
		.attr("d", geoPathInitUpdated)
		.style({
			fill: "#dee2ed",
			stroke: "black"
			});
			
	//to get synchronous execution and load data in a loop
	var varList = [init,c500,c250,c200,c150,c100,c90,c80,c70,c60,c50,c40,c30,c20,c15,c10,c5,c1];
	var gaussValueList = ["init",500,250,200,150,100,90,80,70,60,50,40,30,20,15,10,5,1]

	for (var i=0; i<varList.length;i++) {
		item = varList[i];
		var geoPath = d3.geoPath().projection(mercator);
		g.append("g")
			.attr("id", i)
			.attr("class", "hide")
			.selectAll("path")
			.data(item.features)
			.enter()
			.append("path")
			.attr("id", function(d) {return d.properties.wojewodztw + i;})
			.attr("d", geoPath)
			.style({
				fill: "#ccc",
				stroke: "black"
				});
		};

	//clone function taken from SVG Path Morph Utility for KUTE.js
	clone = function(a) {
				var copy;
				if (a instanceof Array) {
					copy = [];
					for (var i = 0, len = a.length; i < len; i++) {
						copy[i] = clone(a[i]);
					}
					return copy;
				}
				return a;
			};

	pathParser = function(ID) {
		if(document.getElementById(ID)) {
			var str = document.getElementById(ID).getAttribute("d");
			var qstr = '"'+String(str)+'"';
			var noMZPath = qstr.replace(/[MZ]/g,'');
			var cleanPath = noMZPath.replace(/[L]/g,' ');
			var slicedPath = cleanPath.split(' ');
			var coordArray = []
			for(var r=0;r<slicedPath.length;r++) {
				coordArray.push(slicedPath[r].replace(/["]/g,''));
				};
			var xArray = [], yArray = [];
			for(var g=0;g<coordArray.length;g++) {
				xArray.push(coordArray[g].split(',')[0]);
				yArray.push(coordArray[g].split(',')[1]);
				};
			coo = [];
			for(var h=0;h<xArray.length;h++) {
				coo.push([parseFloat(xArray[h]),parseFloat(yArray[h])]);
				};
				return coo;
			};
		};
	
	//function based on KUTE.js Path Morph Log best morph index from SVG Path Morph Utility for KUTE.js
	bestIndex = function(IDenter,IDexit) {
		if(document.getElementById(IDenter) && document.getElementById(IDexit)) {
			enterPath = pathParser(IDenter);
			exitPath = pathParser(IDexit);
			var enterClone = clone(enterPath);
			var exitClone = clone(exitPath);
			var dxy = [], dx, dy;
			for(var i=0;i<exitClone.length;i++) {
				numerator = exitClone.splice(i,exitPath.length - i);
				exitClone = numerator.concat(exitClone);
				dx = Math.abs(enterClone[i][0] - exitClone[i][0]);
				dy = Math.abs(enterClone[i][1] - exitClone[i][1]);
				dxy.push(Math.sqrt(dx*dx + dy*dy));
				exitClone = []; exitClone = clone(exitPath); numerator = null;
				};
			return dxy.indexOf(Math.min.apply(null,dxy));
			};
		};
			
	//function checks both paths, finds the best morph index and waits for execution
	twn = function(ID1,ID2) {
		if(document.getElementById(ID1) && document.getElementById(ID2)) {
			enID = document.getElementById(ID1);
			exID = document.getElementById(ID2);
			var tween = KUTE.fromTo(enID, 
				{path: enID},
				{path: exID},
				{
					morphPrecision: 1,
					morphIndex: bestIndex(enID,exID),
					easing: 'easingElasticInOut',
					duration: 500
					});
				return tween;
			};
		};
			
	var actualStatus = 0;
	document.getElementById("display").innerHTML = "<p>"+String(gaussValueList[actualStatus])+"</p>";

	document.getElementById('NBt').onclick = function() {
		if (actualStatus < varList.length) {
			var preNext = actualStatus + 1;
			var nextTarget = String(preNext);
			if (document.getElementById("init") && document.getElementById(nextTarget)) {
				var dispList = [];
				var nextList = [];
				var dispObject = document.getElementById("init");
				var nextObject = document.getElementById(nextTarget);
				for (var num=0; num < dispObject.childNodes.length; num++) {
					dispList.push(dispObject.childNodes[num].id);
					nextList.push(nextObject.childNodes[num].id);
					};
				var tweenArray = [];
				for (var tnum=0; tnum < dispList.length; tnum++) {
					tweenArray.push([dispList[tnum],nextList[tnum]]);
					};
				var varArray = [];
				for (var vnum=0; vnum < tweenArray.length; vnum++) {
					varArray.push(twn(tweenArray[vnum][0],tweenArray[vnum][1]));
					};
				actualStatus += 1;
				document.getElementById("display").innerHTML = "<p>"+String(gaussValueList[actualStatus])+"</p>";
				nextStart = [];
				for(var ALO=0; ALO < varArray.length; ALO++){
					nextStart.push(varArray[ALO].start());
					};
				return nextStart;
				};
			};	
		};

	document.getElementById('PBt').onclick = function() {
		if (actualStatus >= 0) {
			var prePrev = actualStatus - 1;
			var prevTarget = String(prePrev);
			if (document.getElementById("init") && document.getElementById(prevTarget)) {
				var disppList = [];
				var prevList = [];
				var disppObject = document.getElementById("init");
				var prevObject = document.getElementById(prevTarget);
				for (var numm=0; numm < disppObject.childNodes.length; numm++) {
					disppList.push(disppObject.childNodes[numm].id);
					prevList.push(prevObject.childNodes[numm].id);
					};
				var tweennArray = [];
				for (var tnumm=0; tnumm < disppList.length; tnumm++) {
					tweennArray.push([disppList[tnumm],prevList[tnumm]]);
					};
					var varrArray = [];
				for (var vnumm=0; vnumm < tweennArray.length; vnumm++) {
					varrArray.push(twn(tweennArray[vnumm][0],tweennArray[vnumm][1]));
					};
				actualStatus -= 1;
				document.getElementById("display").innerHTML = "<p>"+String(gaussValueList[actualStatus])+"</p>";
				prevStart = [];
				for(var ALT=0; ALT < varrArray.length; ALT++){
					prevStart.push(varrArray[ALT].start());
					};			
				return prevStart;
				};
			};
		};

</script>
</body>
</html>
