!function(t,e){"use strict";t.addEventListener("DOMContentLoaded",function(){var n=e.location.href.replace(e.location.hash,"");[].slice.call(t.querySelectorAll("use[*|href]")).filter(function(t){return 0===t.getAttribute("xlink:href").indexOf("#")}).forEach(function(t){t.setAttribute("xlink:href",n+t.getAttribute("xlink:href"))})},!1)}(document,window);var h=document.getElementById("basket").offsetHeight,w=h,svg=d3.select(document.getElementById("basket")).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+w+" "+h).attr("id","SVG"),basket=d3.select("#basket"),g=svg.append("g").attr("id","container"),mercator=d3.geoMercator();d3.json("/jsonfile/qc151.json",function(t){var e=topojson.feature(t,t.objects.c151);mercator.scale(1).translate([0,0]);var n=d3.geoPath().projection(mercator),a=n.bounds(e),r=.95/Math.max((a[1][0]-a[0][0])/w,(a[1][1]-a[0][1])/h),o=[(w-r*(a[1][0]+a[0][0]))/2,(h-r*(a[1][1]+a[0][1]))/2];mercator.scale(r).translate(o),g.append("g").attr("id","0").attr("class","wojewodztwo").selectAll("path").data(e.features).enter().append("path").attr("id",function(t){return t.properties.woj+"0"}).attr("d",n)});var gaussValueList=["init",81,61,41,21,11,7,5,3,1];for(i=1;i<gaussValueList.length;i++){var instance=gaussValueList[i],url="/jsonfile/qc"+(instance+"")+".json";d3.json(url,function(t){obj=Object.values(t.objects)[0];var e=d3.geoPath().projection(mercator),n=topojson.feature(t,obj);g.append("g").attr("id",i+1).attr("class","hide").selectAll("path").data(n.features).enter().append("path").attr("id",function(t){return t.properties.woj+(i+1+"")}).attr("d",e),i++})}i=0,clone=function(t){var e;if(t instanceof Array){e=[];for(var n=0,a=t.length;a>n;n++)e[n]=clone(t[n]);return e}return t},pathParser=function(t){if(document.getElementById(t)){for(var e=document.getElementById(t).getAttribute("d"),n='"'+(e+"")+'"',a=n.replace(/[MZ]/g,"").replace(/[L]/g," ").split(" "),o=[],s=0;s<xArray.length;s++)o.push([parseFloat(a[r].replace(/["]/g,"")[g].split(",")[0][s]),parseFloat(a[r].replace(/["]/g,"")[g].split(",")[1][s])]);return o}},bestIndex=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enterPath=pathParser(t),exitPath=pathParser(e);for(var n,a,r=clone(enterPath),o=clone(exitPath),s=[],i=0;i<o.length;i++)numerator=o.splice(i,exitPath.length-i),o=numerator.concat(o),n=Math.abs(r[i][0]-o[i][0]),a=Math.abs(r[i][1]-o[i][1]),s.push(Math.sqrt(n*n+a*a)),o=[],o=clone(exitPath),numerator=null;return s.indexOf(Math.min.apply(null,s))}},twn=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enID=document.getElementById(t),exID=document.getElementById(e);var n=KUTE.fromTo(enID,{path:enID},{path:exID},{morphPrecision:1,morphIndex:bestIndex(enID,exID),easing:"easingElasticInOut",duration:500});return n}};var actualStatus=0;document.getElementById("display").innerHTML="<p>"+(gaussValueList[actualStatus]+"")+"</p>",document.getElementById("NBt").onclick=function(){if(actualStatus<gaussValueList.length){var t=actualStatus+1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],a=[],r=document.getElementById("0"),o=document.getElementById(e),s=0;s<r.childNodes.length;s++)n.push(r.childNodes[s].id),a.push(o.childNodes[s].id);for(var i=[],c=0;c<n.length;c++)i.push([n[c],a[c]]);for(var l=[],u=0;u<i.length;u++)l.push(twn(i[u][0],i[u][1]));actualStatus+=1,document.getElementById("display").innerHTML="<p>"+(gaussValueList[actualStatus]+"")+"</p>",nextStart=[];for(var d=0;d<l.length;d++)nextStart.push(l[d].start());return nextStart}}},document.getElementById("PBt").onclick=function(){if(actualStatus>=0){var t=actualStatus-1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],a=[],r=document.getElementById("0"),o=document.getElementById(e),s=0;s<r.childNodes.length;s++)n.push(r.childNodes[s].id),a.push(o.childNodes[s].id);for(var i=[],c=0;c<n.length;c++)i.push([n[c],a[c]]);for(var l=[],u=0;u<i.length;u++)l.push(twn(i[u][0],i[u][1]));actualStatus-=1,document.getElementById("display").innerHTML="<p>"+(gaussValueList[actualStatus]+"")+"</p>",prevStart=[];for(var d=0;d<l.length;d++)prevStart.push(l[d].start());return prevStart}}},$(document).ready(function(){var t=$("#cont"),e=$("#header"),n=$("#paraStory"),a=$("#first"),r=$("#second"),o=$("#third");$(window).on("scroll",function(){if($(window).width()>961){var s=$(this).scrollTop();t.css({opacity:1-s/200}),e.css({opacity:1-s/130}),n.css({opacity:0+s/350}),a.css({opacity:0+s/450}),r.css({opacity:0+s/470}),o.css({opacity:0+s/490})}}),$(window).on("resize",function(){$(window).width()>961||(n.css({opacity:"1"}),a.css({opacity:"1"}),r.css({opacity:"1"}),o.css({opacity:"1"}))}),$(".boxFrame").hover(function(){$(window).width()>961&&$(this).children(".icon").toggleClass("icon over")},function(){$(window).width()>961&&$(this).children(".over").toggleClass("over icon")})});
