!function(t,e){"use strict";t.addEventListener("DOMContentLoaded",function(){var n=e.location.href.replace(e.location.hash,"");[].slice.call(t.querySelectorAll("use[*|href]")).filter(function(t){return 0===t.getAttribute("xlink:href").indexOf("#")}).forEach(function(t){t.setAttribute("xlink:href",n+t.getAttribute("xlink:href"))})},!1)}(document,window),$(document).ready(function(){var t=document.getElementById("basket").offsetHeight,e=t,n=d3.select(document.getElementById("basket")).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+e+" "+t).attr("id","SVG"),a=(d3.select("#basket"),n.append("g").attr("id","container")),o=d3.geoMercator();d3.json("https://rawgit.com/jlampar/mgr/master/jsonfile/qc151.json",function(n){var r=topojson.feature(n,n.objects.c151);o.scale(1).translate([0,0]);var i=d3.geoPath().projection(o),s=i.bounds(r),c=.95/Math.max((s[1][0]-s[0][0])/e,(s[1][1]-s[0][1])/t),l=[(e-c*(s[1][0]+s[0][0]))/2,(t-c*(s[1][1]+s[0][1]))/2];o.scale(c).translate(l),a.append("g").attr("id","0").attr("class","wojewodztwo").selectAll("path").data(r.features).enter().append("path").attr("id",function(t){return t.properties.woj+"0"}).attr("d",i)});var s=["init",81,61,41,21,11,7,5,3,1];for(i=1;i<s.length;i++){var c=s[i],l="https://rawgit.com/jlampar/mgr/master/jsonfile/qc"+(c+"")+".json";d3.json(l,function(t){obj=Object.values(t.objects)[0];var e=d3.geoPath().projection(o),n=topojson.feature(t,obj);a.append("g").attr("id",i+1).attr("class","hide").selectAll("path").data(n.features).enter().append("path").attr("id",function(t){return t.properties.woj+(i+1+"")}).attr("d",e),i++})}i=0,clone=function(t){var e;if(t instanceof Array){e=[];for(var n=0,a=t.length;a>n;n++)e[n]=clone(t[n]);return e}return t},pathParser=function(t){if(document.getElementById(t)){for(var e=document.getElementById(t).getAttribute("d"),n='"'+(e+"")+'"',o=n.replace(/[MZ]/g,"").replace(/[L]/g," ").split(" "),i=[],s=0;s<xArray.length;s++)i.push([parseFloat(o[r].replace(/["]/g,"")[a].split(",")[0][s]),parseFloat(o[r].replace(/["]/g,"")[a].split(",")[1][s])]);return i}},bestIndex=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enterPath=pathParser(t),exitPath=pathParser(e);for(var n,a,r=clone(enterPath),o=clone(exitPath),i=[],s=0;s<o.length;s++)numerator=o.splice(s,exitPath.length-s),o=numerator.concat(o),n=Math.abs(r[s][0]-o[s][0]),a=Math.abs(r[s][1]-o[s][1]),i.push(Math.sqrt(n*n+a*a)),o=[],o=clone(exitPath),numerator=null;return i.indexOf(Math.min.apply(null,i))}},twn=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enID=document.getElementById(t),exID=document.getElementById(e);var n=KUTE.fromTo(enID,{path:enID},{path:exID},{morphPrecision:1,morphIndex:bestIndex(enID,exID),easing:"easingElasticInOut",duration:500});return n}};var d=0;document.getElementById("display").innerHTML="<p>"+(s[d]+"")+"</p>",document.getElementById("NBt").onclick=function(){if(d<s.length){var t=d+1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],a=[],r=document.getElementById("0"),o=document.getElementById(e),i=0;i<r.childNodes.length;i++)n.push(r.childNodes[i].id),a.push(o.childNodes[i].id);for(var c=[],l=0;l<n.length;l++)c.push([n[l],a[l]]);for(var u=[],p=0;p<c.length;p++)u.push(twn(c[p][0],c[p][1]));d+=1,document.getElementById("display").innerHTML="<p>"+(s[d]+"")+"</p>",nextStart=[];for(var h=0;h<u.length;h++)nextStart.push(u[h].start());return nextStart}}},document.getElementById("PBt").onclick=function(){if(d>=0){var t=d-1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],a=[],r=document.getElementById("0"),o=document.getElementById(e),i=0;i<r.childNodes.length;i++)n.push(r.childNodes[i].id),a.push(o.childNodes[i].id);for(var c=[],l=0;l<n.length;l++)c.push([n[l],a[l]]);for(var u=[],p=0;p<c.length;p++)u.push(twn(c[p][0],c[p][1]));d-=1,document.getElementById("display").innerHTML="<p>"+(s[d]+"")+"</p>",prevStart=[];for(var h=0;h<u.length;h++)prevStart.push(u[h].start());return prevStart}}};var u=$("#cont"),p=$("#header"),h=$("#paraStory"),g=$("#first"),m=$("#second"),f=$("#third");$(window).on("scroll",function(){if($(window).width()>961){var t=$(this).scrollTop();u.css({opacity:1-t/200}),p.css({opacity:1-t/130}),h.css({opacity:0+t/350}),g.css({opacity:0+t/450}),m.css({opacity:0+t/470}),f.css({opacity:0+t/490})}}),$(window).on("resize",function(){$(window).width()>961||(h.css({opacity:"1"}),g.css({opacity:"1"}),m.css({opacity:"1"}),f.css({opacity:"1"}))}),$(".boxFrame").hover(function(){$(window).width()>961&&$(this).children(".icon").toggleClass("icon over")},function(){$(window).width()>961&&$(this).children(".over").toggleClass("over icon")})});
