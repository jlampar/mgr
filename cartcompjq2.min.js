!function(t,e){"use strict";t.addEventListener("DOMContentLoaded",function(){var n=e.location.href.replace(e.location.hash,"");[].slice.call(t.querySelectorAll("use[*|href]")).filter(function(t){return 0===t.getAttribute("xlink:href").indexOf("#")}).forEach(function(t){t.setAttribute("xlink:href",n+t.getAttribute("xlink:href"))})},!1)}(document,window),$(document).ready(function(){var t=document.getElementById("basket").offsetHeight,e=t,n=d3.select(document.getElementById("basket")).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+e+" "+t).attr("id","SVG"),o=(d3.select("#basket"),n.append("g").attr("id","container")),a=d3.geoMercator(),c=[151,81,61,41,21,11,7,5,3,1],d=["init",81,61,41,21,11,7,5,3,1],l=d3.queue();c.forEach(function(t){url="https://rawgit.com/jlampar/mgr/master/jsonfile/qc"+(t+"")+".json",l.defer(d3.json,url)}),l.awaitAll(function(n,r){if(n)throw n;var c=topojson.feature(r[0],Object.values(r[0].objects)[0]);a.scale(1).translate([0,0]);var d=d3.geoPath().projection(a),l=d.bounds(c),s=.95/Math.max((l[1][0]-l[0][0])/e,(l[1][1]-l[0][1])/t),u=[(e-s*(l[1][0]+l[0][0]))/2,(t-s*(l[1][1]+l[0][1]))/2];for(a.scale(s).translate(u),i=0;i<r.length;i++){var p=d3.geoPath().projection(a),h=topojson.feature(r[i],Object.values(r[i].objects)[0]);0===i?o.append("g").attr("id","init").selectAll("path").data(h.features).enter().append("path").attr("id",function(t){return t.properties.woj+"_init"}).attr("d",p):o.append("g").attr("id",i).attr("class","hide").selectAll("path").data(h.features).enter().append("path").attr("id",function(t){return t.properties.woj+(i+"")}).attr("d",p)}}),i=0,clone=function(t){var e;if(t instanceof Array){e=[];for(var n=0,r=t.length;r>n;n++)e[n]=clone(t[n]);return e}return t},pathParser=function(t){if(document.getElementById(t)){for(var e=document.getElementById(t).getAttribute("d"),n='"'+(e+"")+'"',a=n.replace(/[MZ]/g,"").replace(/[L]/g," ").split(" "),i=[],c=0;c<xArray.length;c++)i.push([parseFloat(a[r].replace(/["]/g,"")[o].split(",")[0][c]),parseFloat(a[r].replace(/["]/g,"")[o].split(",")[1][c])]);return i}},bestIndex=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enterPath=pathParser(t),exitPath=pathParser(e);for(var n,r,o=clone(enterPath),a=clone(exitPath),i=[],c=0;c<a.length;c++)numerator=a.splice(c,exitPath.length-c),a=numerator.concat(a),n=Math.abs(o[c][0]-a[c][0]),r=Math.abs(o[c][1]-a[c][1]),i.push(Math.sqrt(n*n+r*r)),a=[],a=clone(exitPath),numerator=null;return i.indexOf(Math.min.apply(null,i))}},twn=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enID=document.getElementById(t),exID=document.getElementById(e);var n=KUTE.fromTo(enID,{path:enID},{path:exID},{morphPrecision:1,morphIndex:bestIndex(enID,exID),easing:"easingElasticInOut",duration:500});return n}};var s=0;document.getElementById("display").innerHTML="<p>"+(d[s]+"")+"</p>",document.getElementById("NBt").onclick=function(){if(s<d.length){var t=s+1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],r=[],o=document.getElementById("0"),a=document.getElementById(e),i=0;i<o.childNodes.length;i++)n.push(o.childNodes[i].id),r.push(a.childNodes[i].id);for(var c=[],l=0;l<n.length;l++)c.push([n[l],r[l]]);for(var u=[],p=0;p<c.length;p++)u.push(twn(c[p][0],c[p][1]));s+=1,document.getElementById("display").innerHTML="<p>"+(d[s]+"")+"</p>",nextStart=[];for(var h=0;h<u.length;h++)nextStart.push(u[h].start());return nextStart}}},document.getElementById("PBt").onclick=function(){if(s>=0){var t=s-1,e=t+"";if(document.getElementById("0")&&document.getElementById(e)){for(var n=[],r=[],o=document.getElementById("0"),a=document.getElementById(e),i=0;i<o.childNodes.length;i++)n.push(o.childNodes[i].id),r.push(a.childNodes[i].id);for(var c=[],l=0;l<n.length;l++)c.push([n[l],r[l]]);for(var u=[],p=0;p<c.length;p++)u.push(twn(c[p][0],c[p][1]));s-=1,document.getElementById("display").innerHTML="<p>"+(d[s]+"")+"</p>",prevStart=[];for(var h=0;h<u.length;h++)prevStart.push(u[h].start());return prevStart}}};var u=$("#cont"),p=$("#header"),h=$("#paraStory"),g=$("#first"),m=$("#second"),f=$("#third");$(window).on("scroll",function(){var t=$(this).scrollTop();u.css({opacity:1-t/200}),p.css({opacity:1-t/130}),h.css({opacity:0+t/350}),g.css({opacity:0+t/450}),m.css({opacity:0+t/470}),f.css({opacity:0+t/490})}),$(window).on("resize",function(){$(window).width()>961||(h.css({opacity:"1"}),g.css({opacity:"1"}),m.css({opacity:"1"}),f.css({opacity:"1"}))}),$(".boxFrame").hover(function(){$(window).width()>961&&$(this).children(".icon").toggleClass("icon over")},function(){$(window).width()>961&&$(this).children(".over").toggleClass("over icon")})});
