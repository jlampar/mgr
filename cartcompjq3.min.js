!function(t,e){"use strict";t.addEventListener("DOMContentLoaded",function(){var n=e.location.href.replace(e.location.hash,"");[].slice.call(t.querySelectorAll("use[*|href]")).filter(function(t){return 0===t.getAttribute("xlink:href").indexOf("#")}).forEach(function(t){t.setAttribute("xlink:href",n+t.getAttribute("xlink:href"))})},!1)}(document,window),$(document).ready(function(){var t=document.getElementById("basket").offsetHeight,e=t,n=d3.select(document.getElementById("basket")).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+e+" "+t).attr("id","SVG"),a=(d3.select("#basket"),n.append("g").attr("id","container")),o=d3.geoMercator(),s=["0000","0001","0002","0003","0004","0005","0006","0007","0008","0009","0010","0011","0012","0013","0014","0015","0016","0017","0018","0019","0100","0101","0102","0103","0104","0105","0106","0107","0108","0109","0110","0111","0112","0113","0114","0115","0116","0117","0118","0119","0200","0201","0202","0203","0204","0205","0206","0207","0208","0209","0210","0211","0212","0213","0214","0215","0216","0217","0218","0219","0300","0301","0302","0303","0304","0305","0306","0307","0308","0309","0310","0311","0312","0313","0314","0315","0316","0317","0318","0319","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2100","2101","2102","2103","2104","2105","2106","2107","2108","2109","2110","2111","2112","2113","2114","2115","2116","2117","2118","2119","2200","2201","2202","2203","2204","2205","2206","2207","2208","2209","2210","2211","2212","2213","2214","2215","2216","2217","2218","2219","2300","2301","2302","2303","2304","2305","2306","2307","2308","2309","2310","2311","2312","2313","2314","2315","2316","2317","2318","2319"],c=d3.queue();s.forEach(function(t){url="https://rawgit.com/jlampar/mgr/master/jsonfile/cJSON/c"+t+".min.topojson",c.defer(d3.json,url)}),c.awaitAll(function(n,r){if(n)throw n;console.log(r);var c=topojson.feature(r[199],Object.values(r[199].objects)[0]);o.scale(1).translate([0,0]);var d=d3.geoPath().projection(o),l=d.bounds(c),u=.95/Math.max((l[1][0]-l[0][0])/e,(l[1][1]-l[0][1])/t),p=[(e-u*(l[1][0]+l[0][0]))/2,(t-u*(l[1][1]+l[0][1]))/2];for(o.scale(u).translate(p),i=0;i<r.length;i++){var h=d3.geoPath().projection(o),f=topojson.feature(r[i],Object.values(r[i].objects)[0]);0===i?a.append("g").attr("id",s[i]).selectAll("path").data(f.features).enter().append("path").attr("id",function(t){return t.properties.woj+s[i]}).attr("d",h).style("fill","#dee2ed").style("stroke","black").style("stroke-width","0.05em"):a.append("g").attr("id",s[i]).attr("class","hide").selectAll("path").data(f.features).enter().append("path").attr("id",function(t){return t.properties.woj+s[i]}).attr("d",h)}}),i=0;var d=[0,0,0,0];$("body").click(function(t,e){if(e)throw e;var n=$(t.target),r=d.join("");if(console.log(r),n.is("div#nBase")&&d[0]<2)return d[0]=d[0]+1;if(n.is("div#pBase")&&d[0]>0)return d[0]=d[0]-1;if(n.is("div#nGene")&&d[1]<3)return d[1]=d[1]+1;if(n.is("div#pGene")&&d[1]>0)return d[1]=d[1]-1;if(n.is("div#nNet")&&d[2]<1)return d[2]=d[2]+1;if(n.is("div#pNet")&&d[2]>0)return d[2]=d[2]-1;if(n.is("div#nGauss")&&d[3]<9)return d[3]=d[3]+1;if(n.is("div#pGauss")&&d[3]>0)return d[3]=d[3]-1;var i=r;if(document.getElementById("0000")&&document.getElementById(i)){for(var a=[],o=[],s=document.getElementById("0000"),c=document.getElementById(i),l=0;l<s.childNodes.length;l++)a.push(s.childNodes[l].id),o.push(c.childNodes[l].id);for(var u=[],p=0;p<a.length;p++)u.push([a[p],o[p]]);for(var h=[],f=0;f<u.length;f++)h.push(twn(u[f][0],u[f][1]));nextStart=[];for(var g=0;g<h.length;g++)nextStart.push(h[g].start());return nextStart}});var l=$("#cont"),u=$("#header"),p=$("#paraStory"),h=$("#first"),f=$("#second"),g=$("#third");$(window).on("scroll",function(){var t=$(this).scrollTop();l.css({opacity:1-t/200}),u.css({opacity:1-t/130}),p.css({opacity:0+t/350}),h.css({opacity:0+t/450}),f.css({opacity:0+t/470}),g.css({opacity:0+t/490})}),$(window).on("resize",function(){$(window).width()>961||(p.css({opacity:"1"}),h.css({opacity:"1"}),f.css({opacity:"1"}),g.css({opacity:"1"}))}),$(".boxFrame").hover(function(){$(window).width()>961&&$(this).children(".icon").toggleClass("icon over")},function(){$(window).width()>961&&$(this).children(".over").toggleClass("over icon")}),clone=function(t){var e;if(t instanceof Array){e=[];for(var n=0,r=t.length;r>n;n++)e[n]=clone(t[n]);return e}return t},pathParser=function(t){if(document.getElementById(t)){for(var e=document.getElementById(t).getAttribute("d"),n='"'+(e+"")+'"',i=n.replace(/[MZ]/g,"").replace(/[L]/g," ").split(" "),o=[],s=0;s<xArray.length;s++)o.push([parseFloat(i[r].replace(/["]/g,"")[a].split(",")[0][s]),parseFloat(i[r].replace(/["]/g,"")[a].split(",")[1][s])]);return o}},bestIndex=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enterPath=pathParser(t),exitPath=pathParser(e);for(var n,r,i=clone(enterPath),a=clone(exitPath),o=[],s=0;s<a.length;s++)numerator=a.splice(s,exitPath.length-s),a=numerator.concat(a),n=Math.abs(i[s][0]-a[s][0]),r=Math.abs(i[s][1]-a[s][1]),o.push(Math.sqrt(n*n+r*r)),a=[],a=clone(exitPath),numerator=null;return o.indexOf(Math.min.apply(null,o))}},twn=function(t,e){if(document.getElementById(t)&&document.getElementById(e)){enID=document.getElementById(t),exID=document.getElementById(e);var n=KUTE.fromTo(enID,{path:enID},{path:exID},{morphPrecision:1,morphIndex:bestIndex(enID,exID),easing:"easingElasticInOut",duration:500});return n}}});
